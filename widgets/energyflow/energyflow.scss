.widget-energyflow {
  padding: 5px;

  .energyflow-container {
    width: 100%;
    height: calc(100% - 20px);
  }

  .energyflow-svg {
    width: 100%;
    height: 100%;
  }

  // ─── Flow paths ───────────────────────────────────────────
  .flow-path {
    fill: none;
    stroke: rgba(255, 255, 255, 0.12);
    stroke-width: 5;
    stroke-linecap: round;
    stroke-dasharray: none;
    transition: stroke 0.5s ease;

    &.active {
      stroke: rgba(255, 255, 255, 0.75);
      stroke-dasharray: 8 18;
      animation: flow-forward 1.8s linear infinite;
    }

    &.active.reverse {
      animation: flow-reverse 1.8s linear infinite;
    }
  }

  @keyframes flow-forward {
    from { stroke-dashoffset: 26; }
    to   { stroke-dashoffset: 0; }
  }

  @keyframes flow-reverse {
    from { stroke-dashoffset: 0; }
    to   { stroke-dashoffset: 26; }
  }

  // ─── Nodes ────────────────────────────────────────────────
  .node-circle {
    stroke: rgba(255, 255, 255, 0.25);
    stroke-width: 2;

    &.solar    { fill: #c8860a; }  // amber
    &.grid     { fill: #2a6db5; }  // blue
    &.house    { fill: #4a4a6a; }  // dark blue-grey
    &.heatpump { fill: #a0522d; }  // sienna
    &.battery  { fill: #2e7d32; }  // green
  }

  .node-icon {
    fill: rgba(255, 255, 255, 0.9);
  }

  .node-label {
    fill: rgba(255, 255, 255, 0.65);
    font-size: 11px;
    font-weight: 300;
    text-transform: uppercase;
    letter-spacing: 0.05em;
  }

  .node-value {
    fill: #ffffff;
    font-size: 13px;
    font-weight: 600;
  }

  .node-kwh {
    fill: rgba(255, 255, 255, 0.55);
    font-size: 10px;
    font-weight: 400;
  }

  .node-soc {
    fill: #a5d6a7;
    font-size: 13px;
    font-weight: 600;
  }

  // ─── Bottom label ─────────────────────────────────────────
  .updated-at {
    font-size: 10px;
    opacity: 0.5;
  }

  // ─── Weather panel (top-right) ────────────────────────────
  .weather-icon {
    fill: rgba(255, 255, 255, 0.95);
    font-size: 26px;
    font-family: 'Climacons-Font';
  }

  .weather-temp {
    fill: #ffffff;
    font-size: 24px;
    font-weight: 600;
  }

  .weather-wind {
    fill: rgba(255, 255, 255, 0.55);
    font-size: 14px;
    font-weight: 300;
  }

  .weather-separator {
    stroke: rgba(255, 255, 255, 0.15);
    stroke-width: 1;
  }

  .weather-fc-day {
    fill: rgba(255, 255, 255, 0.55);
    font-size: 13px;
    font-weight: 300;
    text-transform: uppercase;
    letter-spacing: 0.05em;
  }

  .weather-fc-icon {
    fill: rgba(255, 255, 255, 0.9);
    font-size: 20px;
    font-family: 'Climacons-Font';
  }

  .weather-fc-temp {
    fill: rgba(255, 255, 255, 0.75);
    font-size: 13px;
  }
}
